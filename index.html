<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Plug & Play Shop</title>
  <link rel="stylesheet" href="style.css" />
  <script src="themes.js" defer></script>
</head>
<body class="theme-light">

  <!-- Navigation Bar -->
  <header>
    <div class="nav-left">
      <button id="menuToggle">â˜°</button>
      <h1 class="site-title">Plug & Play Shop</h1>
    </div>
    <div class="nav-right">
      <button id="loginBtn">Login</button>
      <button id="signupBtn">Sign Up</button>
      <a href="cart.html" id="cartBtn">ðŸ›’</a>
    </div>
  </header>

  <!-- Side Menu -->
  <nav id="sideMenu" class="hidden">
    <ul>
      <li><a href="index.html">Shop</a></li>
      <li><a href="search.html">Search</a></li>
      <li><a href="support.html">Support</a></li>
      <li><a href="#" onclick="openThemeSwitcher()">Themes</a></li>
      <li><a href="dev.html">Developer</a></li>
    </ul>
  </nav>

  <!-- Welcome Message -->
  <section class="welcome">
    <h2>Welcome to Plug & Play Shop where your dreams come to life</h2>
  </section>

  <!-- Product Listings -->
  <main class="product-list">

    <div class="product">
      <img src="assets/ps5.jpg" alt="PS5">
      <h3>PlayStation 5 Console</h3>
      <p>$499.99</p>
      <button>Add to Basket</button>
      <button onclick="buyNow(1)">Buy Now</button>
    </div>

    <div class="product">
      <img src="assets/fortnite.jpg" alt="Fortnite OG">
      <h3>Fortnite OG Account</h3>
      <p>$199.99</p>
      <button>Add to Basket</button>
      <button onclick="buyNow(2)">Buy Now</button>
    </div>

    <div class="product">
      <img src="assets/keyboard.jpg" alt="Keyboard">
      <h3>RGB Gaming Keyboard</h3>
      <p>$89.99</p>
      <button>Add to Basket</button>
      <button onclick="buyNow(3)">Buy Now</button>
    </div>

    <div class="product">
      <img src="assets/minecraft.jpg" alt="Minecraft">
      <h3>Rare Minecraft Account</h3>
      <p>$149.99</p>
      <button>Add to Basket</button>
      <button onclick="buyNow(4)">Buy Now</button>
    </div>

    <div class="product">
      <img src="assets/headset.jpg" alt="Headset">
      <h3>Wireless Gaming Headset</h3>
      <p>$129.99</p>
      <button>Add to Basket</button>
      <button onclick="buyNow(5)">Buy Now</button>
    </div>

  </main>

  <!-- Login/Signup Popups -->
  <div id="popupOverlay" class="popup hidden">
    <div class="popup-content">
      <span class="close">&times;</span>
      <h3 id="popupTitle">Login</h3>
      <input type="email" placeholder="Email" />
      <input type="password" placeholder="Password" />
      <button>Continue</button>
    </div>
  </div>

  <!-- Theme Switcher -->
  <div id="themeSwitcher" class="popup hidden">
    <div class="popup-content">
      <span class="close">&times;</span>
      <h3>Select Theme</h3>
      <button onclick="setTheme('theme-light')">Light</button>
      <button onclick="setTheme('theme-neon')">Neon Blue</button>
      <button onclick="setTheme('theme-dark')">Dark Neon Red</button>
    </div>
  </div>

  <!-- Basket Script -->
  <script>
    const products = [
      { id: 1, name: "PlayStation 5 Console", price: 499.99 },
      { id: 2, name: "Fortnite OG Account", price: 199.99 },
      { id: 3, name: "RGB Gaming Keyboard", price: 89.99 },
      { id: 4, name: "Rare Minecraft Account", price: 149.99 },
      { id: 5, name: "Wireless Gaming Headset", price: 129.99 },
    ];

    document.addEventListener("DOMContentLoaded", () => {
      const menuToggle = document.getElementById("menuToggle");
      const sideMenu = document.getElementById("sideMenu");
      const loginBtn = document.getElementById("loginBtn");
      const signupBtn = document.getElementById("signupBtn");
      const popup = document.getElementById("popupOverlay");
      const themePopup = document.getElementById("themeSwitcher");

      document.querySelectorAll(".close").forEach(btn =>
        btn.addEventListener("click", () => {
          popup.classList.add("hidden");
          themePopup.classList.add("hidden");
        })
      );

      loginBtn.onclick = () => {
        document.getElementById("popupTitle").textContent = "Login";
        popup.classList.remove("hidden");
      };
      signupBtn.onclick = () => {
        document.getElementById("popupTitle").textContent = "Sign Up";
        popup.classList.remove("hidden");
      };

      menuToggle.onclick = () => {
        sideMenu.classList.toggle("hidden");
      };

      const addButtons = document.querySelectorAll(".product button:first-of-type");
      addButtons.forEach((btn, index) => {
        btn.addEventListener("click", () => {
          addToBasket(products[index]);
          alert(products[index].name + " added to basket!");
        });
      });
    });

    function addToBasket(product) {
      let basket = JSON.parse(localStorage.getItem("basket")) || [];
      const existing = basket.find(item => item.id === product.id);
      if (existing) {
        existing.qty++;
      } else {
        basket.push({ ...product, qty: 1 });
      }
      localStorage.setItem("basket", JSON.stringify(basket));
    }

    function buyNow(id) {
      localStorage.setItem("buyNowId", id);
      window.location.href = "checkout.html";
    }

    function openThemeSwitcher() {
      document.getElementById("themeSwitcher").classList.remove("hidden");
    }

    function setTheme(theme) {
      document.body.className = theme;
      localStorage.setItem("theme", theme);
      document.getElementById("themeSwitcher").classList.add("hidden");
    }

    // Load saved theme
    document.addEventListener("DOMContentLoaded", () => {
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme) document.body.className = savedTheme;
    });
  </script>

</body>
</html>
